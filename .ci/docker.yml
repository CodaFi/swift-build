pr:
  branches:
    include:
      - master
  paths:
    include:
      - .ci/docker.yml
      - docker/Ubuntu-18.04/.dockerignore
      - docker/Ubuntu-18.04/Dockerfile
schedules:
  - cron: "0 8 * * *"
    always: true
    branches:
      include:
        - master
    displayName: Daily (8:00 AM) build
trigger:
  branches:
    include:
      - master
  paths:
    include:
      - .ci/docker.yml
      - docker/Ubuntu-18.04/.dockerignore
      - docker/Ubuntu-18.04/Dockerfile
jobs:
  - job: ubuntu
    pool:
      vmImage: ubuntu-18.04
    steps:
      - task: Docker@2
        inputs:
          containerRegistry: DockerHub
          repository: compnerd/swift
          command: buildAndPush
          Dockerfile: docker/Ubuntu-18.04/Dockerfile
      - task: Docker@2
        inputs:
          containerRegistry: DockerHub
          repository: compnerd/swift
          command: buildAndPush
          Dockerfile: docker/Ubuntu-18.04/Dockerfile
          tags: latest
        condition: eq( '$(Build.Reason)', 'Scheduled' )
